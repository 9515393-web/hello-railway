import asyncpg
import asyncio
from aiogram import Bot, Dispatcher, types, F
from aiogram.client.default import DefaultBotProperties
from aiogram.filters import Command
from io import BytesIO
from aiogram.fsm.storage.memory import MemoryStorage
from aiogram.fsm.state import State, StatesGroup
from aiogram.fsm.context import FSMContext
from aiogram.types import (
    BufferedInputFile,
    ReplyKeyboardMarkup,
    KeyboardButton,
    FSInputFile,
    InlineKeyboardMarkup,
    InlineKeyboardButton
)
import qrcode

import os

API_TOKEN = os.getenv("BOT_TOKEN")
if not API_TOKEN:
    raise RuntimeError("BOT_TOKEN is not set in Railway Variables")


GOOGLE_FORM_URL = (
    "https://docs.google.com/forms/d/e/"
    "1FAIpQLScIlQHkjAVnb1L6-Nmpsoc8vUSKXjBUK24BKQIV3phAXVJy_g/"
    "viewform?usp=dialog"
)

CHAT_URL = "https://t.me/+dmJ15VfkRCc3YjUy"
BOT_URL = "https://t.me/Recreator_info_bot"

bot_kb = InlineKeyboardMarkup(
    inline_keyboard=[
        [InlineKeyboardButton(text="ü§ñ –û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞", url=BOT_URL)]
    ]
)
# ===== –ê–î–ú–ò–ù–´ =====
ADMIN_IDS = {852852917}
def is_admin(user_id: int) -> bool:
    return user_id in ADMIN_IDS

dp = Dispatcher(storage=MemoryStorage())

# ===== –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê =====
async def debug_bot(bot: Bot):
    me = await bot.get_me()
    print("–ë–û–¢ –ó–ê–ü–£–©–ï–ù –ö–ê–ö:", me.username)
async def generate_qr() -> BufferedInputFile:
    qr = qrcode.make("https://t.me/Recreator_info_bot")

    bio = BytesIO()
    qr.save(bio, format="PNG")
    bio.seek(0)

    return BufferedInputFile(
        file=bio.read(),
        filename="recreator_bot_qr.png"
    )

# ===== –ö–õ–ê–í–ò–ê–¢–£–†–ê =====
keyboard = ReplyKeyboardMarkup(
    keyboard=[
        [KeyboardButton(text="üè° –û –ø—Ä–æ–µ–∫—Ç–µ")],
        [KeyboardButton(text="üìú –ò—Å—Ç–æ—Ä–∏—è –¥–µ—Ä–µ–≤–Ω–∏ –ó–∞—Ö–æ–∂—å–µ")],
        [KeyboardButton(text="üó∫ –ö–∞—Ä—Ç—ã")],
        [KeyboardButton(text="üó∫ –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞")],
        [KeyboardButton(text="üó≥ –ü—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ –≤ –æ–ø—Ä–æ—Å–µ")],
        [KeyboardButton(text="üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")],
        [KeyboardButton(text="üí¨ –ß–∞—Ç –∂–∏—Ç–µ–ª–µ–π")],
        [KeyboardButton(text="ü§ù –ö–∞–∫ –ø–æ–º–æ—á—å")]
    ],
    resize_keyboard=True
)
admin_keyboard = ReplyKeyboardMarkup(
    keyboard=[
        [KeyboardButton(text="üìä –ê–¥–º–∏–Ω: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")],
        [KeyboardButton(text="üì£ –ê–¥–º–∏–Ω: —Ä–∞—Å—Å—ã–ª–∫–∞")],
        [KeyboardButton(text="‚¨Ö –ù–∞–∑–∞–¥")]
    ],
    resize_keyboard=True
)

class AdminBroadcastState(StatesGroup):
    waiting_text = State()
    
MAPS = {
    "üó∫ –ö–∞—Ä—Ç–∞ 1792 –≥–æ–¥": {
        "file": "maps/map_1792.jpg",
        "caption": (
            "üó∫ **–í—ã–∫–æ–ø–∏—Ä–æ–≤–∫–∞ –∏–∑ –∫–∞—Ä—Ç—ã –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥—Å–∫–æ–π –≥—É–±–µ—Ä–Ω–∏–∏, 1792 –≥.**\n\n"
            "–ù–∞ –∫–∞—Ä—Ç–µ –¥–µ—Ä–µ–≤–Ω—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∞ –∫–∞–∫ **¬´–ú. –ó–∞—Ö–æ–Ω—å–µ¬ª** "
            "(–ú–∞–ª–æ–µ –ó–∞—Ö–æ–Ω—å–µ).\n\n"
            "–ü–µ—Ä–≤–æ–µ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –¥–µ—Ä–µ–≤–Ω–∏ "
            "–≤ —Å–æ—Å—Ç–∞–≤–µ –†–æ—Å—Å–∏–π—Å–∫–æ–π –∏–º–ø–µ—Ä–∏–∏."
        ),
    },
    "üó∫ –ü–ª–∞–Ω –¥–µ—Ä–µ–≤–Ω–∏ 1885 –≥.": {
        "file": "maps/map_1885.jpg",
        "caption": (
            "üó∫ **–ü–ª–∞–Ω –¥–µ—Ä–µ–≤–Ω–∏ –ó–∞—Ö–æ–∂—å–µ, 1885 –≥–æ–¥**\n\n"
            "–û—Ç—Ä–∞–∂–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞—Å—Ç—Ä–æ–π–∫–∏, "
            "—Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –¥–≤–æ—Ä–æ–≤ –∏ –¥–æ—Ä–æ–≥.\n\n"
            "–ü–µ—Ä–∏–æ–¥ —É—Å—Ç–æ–π—á–∏–≤–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è XIX –≤–µ–∫–∞."
        ),
    },
    "üó∫ –ü–ª–∞–Ω –¥–µ—Ä–µ–≤–Ω–∏ 1941 –≥.": {
        "file": "maps/map_1941.jpg",
        "caption": (
            "üó∫ **–ö–∞—Ä—Ç–∞ –º–µ—Å—Ç–Ω–æ—Å—Ç–∏, 1941 –≥–æ–¥**\n\n"
            "–ü–æ–ª–æ–∂–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–Ω–∏ –ó–∞—Ö–æ–∂—å–µ "
            "–Ω–∞–∫–∞–Ω—É–Ω–µ –∏ –≤ –ø–µ—Ä–∏–æ–¥ –í–µ–ª–∏–∫–æ–π –û—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–æ–π–Ω—ã."
        ),
    },
    "üó∫ –ö–∞—Ä—Ç–∞ - –ù–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è (–≤—ã–∫–æ–ø–∏—Ä–æ–≤–∫–∞ –∫–∞—Ä—Ç—ã –†–æ—Å—Ä–µ–µ—Å—Ç—Ä–∞)": {
        "file": "maps/map_now.jpg",
        "caption": (
            "üó∫ **–¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è –ó–∞—Ö–æ–∂—å—è ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**\n\n"
            "–ì—Ä–∞–Ω–∏—Ü—ã –°–ù–¢, –∑–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –¥–æ—Ä–æ–∂–Ω–∞—è —Å–µ—Ç—å.\n\n"
            "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏."
        ),
    },
}
maps_keyboard = ReplyKeyboardMarkup(
    keyboard=[[KeyboardButton(text=key)] for key in MAPS.keys()] +
             [[KeyboardButton(text="‚¨Ö –ù–∞–∑–∞–¥")]],
    resize_keyboard=True
)

# ===== –ë–ê–ó–ê =====
DATABASE_URL = os.getenv("DATABASE_URL")
if not DATABASE_URL:
    raise RuntimeError("DATABASE_URL is not set in Railway Variables")


async def init_db():
    conn = await asyncpg.connect(DATABASE_URL)

    await conn.execute("""
        CREATE TABLE IF NOT EXISTS votes (
            id SERIAL PRIMARY KEY,
            user_id BIGINT NOT NULL,
            created_at TIMESTAMP DEFAULT NOW()
        )
    """)

    await conn.close()

async def register_vote(uid: int):
    conn = await asyncpg.connect(DATABASE_URL)
    await conn.execute(
        "INSERT INTO votes (user_id) VALUES ($1)",
        uid
    )
    await conn.close()
    
async def get_votes_count() -> int:
    conn = await asyncpg.connect(DATABASE_URL)
    count = await conn.fetchval("SELECT COUNT(*) FROM votes")
    await conn.close()
    return count
async def get_unique_users_count() -> int:
    conn = await asyncpg.connect(DATABASE_URL)
    count = await conn.fetchval(
        "SELECT COUNT(DISTINCT user_id) FROM votes"
    )
    await conn.close()
    return count

async def get_all_user_ids() -> list[int]:
    conn = await asyncpg.connect(DATABASE_URL)
    rows = await conn.fetch(
        "SELECT DISTINCT user_id FROM votes"
    )
    await conn.close()
    return [r["user_id"] for r in rows]

async def get_last_vote():
    conn = await asyncpg.connect(DATABASE_URL)

    row = await conn.fetchrow("""
        SELECT user_id, created_at
        FROM votes
        ORDER BY created_at DESC
        LIMIT 1
    """)

    await conn.close()
    return row
    
async def get_votes_by_date(days_ago: int) -> int:
    conn = await asyncpg.connect(DATABASE_URL)

    count = await conn.fetchval("""
        SELECT COUNT(*)
        FROM votes
        WHERE created_at >= CURRENT_DATE - make_interval(days => $1)
          AND created_at <  CURRENT_DATE - make_interval(days => $1) + INTERVAL '1 day'
    """, days_ago)

    await conn.close()
    return count
  
# ===== –ö–û–ú–ê–ù–î–´ =====
@dp.message(Command("start"))
async def start_cmd(message: types.Message):
    await message.answer(
        "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! üëã\n\n"
        "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –±–æ—Ç –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–µ—Ä–µ–≤–Ω–∏ –ó–∞—Ö–æ–∂—å–µ.\n\n"
        "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –Ω–∏–∂–µ üëá",
        reply_markup=keyboard
    )

@dp.message(Command("version"))
async def version_cmd(message: types.Message):
    await message.answer(
        "üü¢ BOT VERSION 3.2\n"
        "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞\n"
    )

@dp.message(Command("admin"))
async def admin_menu(message: types.Message):
    if not is_admin(message.from_user.id):
        return

    await message.answer(
        "üîê –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å",
        reply_markup=admin_keyboard
    )
@dp.message(Command("whoami"))
async def whoami(message: types.Message):
    await message.answer(f"–í–∞—à ID: {message.from_user.id}")
    
@dp.message(Command("bot"))
async def bot_link(message: types.Message):
    await message.answer(
        "ü§ñ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –±–æ—Ç –ø—Ä–æ–µ–∫—Ç–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–µ—Ä–µ–≤–Ω–∏ –ó–∞—Ö–æ–∂—å–µ:",
        reply_markup=bot_kb
    )
@dp.message(F.text == "üìä –ê–¥–º–∏–Ω: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")
async def admin_stats(message: types.Message):
    if not is_admin(message.from_user.id):
        await message.answer("‚õî –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞")
        return

    try:
        total = await get_votes_count()
        unique = await get_unique_users_count()
        today = await get_votes_by_date(0)
        yesterday = await get_votes_by_date(1)
        last = await get_last_vote()

        if last and last["created_at"]:
            last_user = last["user_id"]
            last_time = last["created_at"].strftime("%d.%m.%Y %H:%M")
        else:
            last_user = "‚Äî"
            last_time = "‚Äî"

        await message.answer(
            "üìä <b>–ê–¥–º–∏–Ω-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</b>\n\n"
            f"üîò –í—Å–µ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤: <b>{total}</b>\n"
            f"üë• –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: <b>{unique}</b>\n\n"
            f"üìÖ –°–µ–≥–æ–¥–Ω—è: <b>{today}</b>\n"
            f"üìÖ –í—á–µ—Ä–∞: <b>{yesterday}</b>\n\n"
            f"üÜî –ü–æ—Å–ª–µ–¥–Ω–∏–π –ø–µ—Ä–µ—Ö–æ–¥: <code>{last_user}</code>\n"
            f"üïí –í—Ä–µ–º—è: <b>{last_time}</b>",
            reply_markup=admin_keyboard
        )

    except Exception as e:
        print("–ê–î–ú–ò–ù-–°–¢–ê–¢–ò–°–¢–ò–ö–ê –û–®–ò–ë–ö–ê:", repr(e))
        await message.answer("‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.")

@dp.message(F.text == "üì£ –ê–¥–º–∏–Ω: —Ä–∞—Å—Å—ã–ª–∫–∞")
async def admin_broadcast_start(message: types.Message, state: FSMContext):
    if not is_admin(message.from_user.id):
        return

    await message.answer(
        "‚úèÔ∏è –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç —Ä–∞—Å—Å—ã–ª–∫–∏.\n\n"
        "–°–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –æ–ø—Ä–æ—Å–∞."
    )
    await state.set_state(AdminBroadcastState.waiting_text)
@dp.message(AdminBroadcastState.waiting_text)
async def admin_broadcast_send(message: types.Message, state: FSMContext):
    if not is_admin(message.from_user.id):
        return

    text = message.text
    user_ids = await get_all_user_ids()

    sent = 0
    failed = 0

    for uid in user_ids:
        try:
            await message.bot.send_message(uid, text)
            sent += 1
            await asyncio.sleep(0.05)  # üî¥ –∞–Ω—Ç–∏—Ñ–ª—É–¥
        except Exception:
            failed += 1

    await state.clear()

    await message.answer(
        "üì£ <b>–†–∞—Å—Å—ã–ª–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞</b>\n\n"
        f"‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: <b>{sent}</b>\n"
        f"‚ö†Ô∏è –û—à–∏–±–æ–∫: <b>{failed}</b>",
        reply_markup=admin_keyboard
    )

# ===== –û –ü–†–û–ï–ö–¢–ï =====
@dp.message(F.text == "üè° –û –ø—Ä–æ–µ–∫—Ç–µ")
async def about_cmd(message: types.Message):
   
    parts = [
        "üè° <b>–ó–∞—á–µ–º –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –¥–µ—Ä–µ–≤–Ω—é –ó–∞—Ö–æ–∂—å–µ?</b>\n"
        "<i>–ö—Ä–∞—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É</i>\n\n"
        "–°–µ–≥–æ–¥–Ω—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è –°–ù–¢ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —è–≤–ª—è–µ—Ç—Å—è –∂–∏–≤—ã–º –ø–æ—Å–µ–ª–µ–Ω–∏–µ–º, "
        "–≥–¥–µ –º–Ω–æ–≥–∏–µ –ø—Ä–æ–∂–∏–≤–∞—é—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ. –û–¥–Ω–∞–∫–æ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏ –¥–µ—Ä–µ–≤–Ω–∏ –Ω–µ—Ç ‚Äî "
        "–æ–Ω–∞ –±—ã–ª–∞ —É–ø—Ä–∞–∑–¥–Ω–µ–Ω–∞, –∞ –≤–º–µ—Å—Ç–µ —Å –Ω–µ–π –∏—Å—á–µ–∑–ª–∏ –∞–¥—Ä–µ—Å–∞, —Å—Ç–∞—Ç—É—Å –∏ "
        "–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è.",

        "–°–æ–∑–¥–∞–Ω–∏–µ (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ) –¥–µ—Ä–µ–≤–Ω–∏ –ø–æ–∑–≤–æ–ª–∏—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã "
        "–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –ø–æ—Ä—è–¥–æ–∫ –∏ —Ä–µ—à–∏—Ç—å –º–Ω–æ–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, "
        "—Å –∫–æ—Ç–æ—Ä—ã–º–∏ –∂–∏—Ç–µ–ª–∏ —Å—Ç–∞–ª–∫–∏–≤–∞—é—Ç—Å—è –∏–∑ –≥–æ–¥–∞ –≤ –≥–æ–¥.",

        "üìå **–ß—Ç–æ –¥–∞—Å—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –¥–µ—Ä–µ–≤–Ω–∏ –∂–∏—Ç–µ–ª—è–º?**",

        "‚úî **1. –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –¥–ª—è –≤—Å–µ—Ö –¥–æ–º–æ–≤ –∏ —É—á–∞—Å—Ç–∫–æ–≤**\n"
        "–ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–µ—Ä–µ–≤–Ω–∏ –∫–∞–∂–¥–æ–º—É –¥–æ–º—É –∏ —É—á–∞—Å—Ç–∫—É "
        "–ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∞–¥—Ä–µ—Å:\n"
        "‚Ä¢ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ü–æ—á—Ç—ã –∏ –∫—É—Ä—å–µ—Ä–æ–≤;\n"
        "‚Ä¢ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—É—Ç–∞–Ω–∏—Ü—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö;\n"
        "‚Ä¢ —É–ø—Ä–æ—â–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫ —Å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å—é;\n"
        "‚Ä¢ —É–¥–æ–±—Å—Ç–≤–æ –≤ –ø–æ–ª—É—á–µ–Ω–∏–∏ –≥–æ—Å—É—Å–ª—É–≥.",

        "‚úî **2. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–ø—Ä–æ–ø–∏—Å–∫–∏) –≤ –¥–æ–º–µ**\n"
        "–°—Ç–∞—Ç—É—Å –¥–µ—Ä–µ–≤–Ω–∏ –æ–∑–Ω–∞—á–∞–µ—Ç:\n"
        "‚Ä¢ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –∂–∏–ª–æ–º –¥–æ–º–µ;\n"
        "‚Ä¢ –¥–æ—Å—Ç—É–ø –∫ —à–∫–æ–ª–µ, –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–µ, –¥–µ—Ç—Å–∫–æ–º—É —Å–∞–¥—É;\n"
        "‚Ä¢ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ª—å–≥–æ—Ç –∏ —Å—É–±—Å–∏–¥–∏–π –ø–æ –º–µ—Å—Ç—É –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è.",

        "‚úî **3. –†–∞–∑–≤–∏—Ç–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–∞ —Å—á—ë—Ç –±—é–¥–∂–µ—Ç–∞**\n"
        "–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –°–ù–¢, –¥–µ—Ä–µ–≤–Ω—è –≤—Ö–æ–¥–∏—Ç –≤ –ø—Ä–æ–≥—Ä–∞–º–º—ã "
        "–º–µ—Å—Ç–Ω–æ–≥–æ —Å–∞–º–æ—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:\n"
        "‚Ä¢ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∏ —Ä–µ–º–æ–Ω—Ç –ø–æ–¥—ä–µ–∑–¥–Ω—ã—Ö –¥–æ—Ä–æ–≥;\n"
        "‚Ä¢ —É–ª—É—á—à–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏–ø–æ—Å–µ–ª–∫–æ–≤—ã—Ö –¥–æ—Ä–æ–≥;\n"
        "‚Ä¢ —É–ª–∏—á–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ;\n"
        "‚Ä¢ —É—á–∞—Å—Ç–∏–µ –≤ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö —Ä–∞–∑–≤–∏—Ç–∏—è.",

        "‚úî **4. –†–æ—Å—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏**\n"
        "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–Ω–∏ –ø–æ–≤—ã—à–∞–µ—Ç —Ü–µ–Ω–Ω–æ—Å—Ç—å —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏:\n"
        "‚Ä¢ –¥–æ–º–∞ –∏ —É—á–∞—Å—Ç–∫–∏ —Å –∞–¥—Ä–µ—Å–∞–º–∏ —Å—Ç–æ—è—Ç –¥–æ—Ä–æ–∂–µ;\n"
        "‚Ä¢ –∏—Å—á–µ–∑–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –∏–ø–æ—Ç–µ–∫–æ–π –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π.",

        "‚úî **5. –£–¥–æ–±—Å—Ç–≤–æ –¥–ª—è —Å–ª—É–∂–± 112, –ú–ß–°, —Å–∫–æ—Ä–æ–π, –ø–æ–ª–∏—Ü–∏–∏**\n"
        "–ü–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è –¥–µ—Ä–µ–≤–Ω–∏ –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ–µ—Å—Ç—Ä—ã:\n"
        "‚Ä¢ —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ —Å–ª—É–∂–±—ã –ª–µ–≥–∫–æ –Ω–∞—Ö–æ–¥—è—Ç –∞–¥—Ä–µ—Å–∞;\n"
        "‚Ä¢ —Å–Ω–∏–∂–∞—é—Ç—Å—è —Ä–∏—Å–∫–∏ –∑–∞–¥–µ—Ä–∂–µ–∫ –ø—Ä–∏ –≤—ã–∑–æ–≤–∞—Ö;\n"
        "‚Ä¢ –ø–æ–≤—ã—à–∞–µ—Ç—Å—è –æ–±—â–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ—Å–µ–ª–µ–Ω–∏—è.",

        "‚úî **6. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è ¬´–ó–∞—Ö–æ–∂—å–µ¬ª**\n"
        "–°–æ–∑–¥–∞–Ω–∏–µ –¥–µ—Ä–µ–≤–Ω–∏ –∑–∞–∫—Ä–µ–ø–ª—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ç–æ–ø–æ–Ω–∏–º, "
        "—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–Ω–æ–≥–æ –¥–µ—Å—è—Ç–∏–ª–µ—Ç–∏–π, –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç "
        "–∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏.",

        "üìå **–ß—Ç–æ –¥–ª—è —ç—Ç–æ–≥–æ –¥–µ–ª–∞–µ—Ç—Å—è —Å–µ–π—á–∞—Å?**\n"
        "–ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω–∞—è –≥—Ä—É–ø–ø–∞ –∂–∏—Ç–µ–ª–µ–π:\n"
        "‚Ä¢ —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –∑–∞—Å—Ç—Ä–æ–π–∫–µ –∏ –ø—Ä–æ–∂–∏–≤–∞—é—â–∏—Ö;\n"
        "‚Ä¢ –≥–æ—Ç–æ–≤–∏—Ç —Å—Ö–µ–º—ã –∏ –∫–∞—Ä—Ç—ã —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏;\n"
        "‚Ä¢ –≤–µ–¥—ë—Ç —Ä–∞–±–æ—Ç—É —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –ù–∏–∫–æ–ª—å—Å–∫–æ–≥–æ "
        "–∏ –¢–æ—Å–Ω–µ–Ω—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞;\n"
        "‚Ä¢ –≥–æ—Ç–æ–≤–∏—Ç –ø–∞–∫–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ –≤–∫–ª—é—á–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–Ω–∏ "
        "–≤ –ø–µ—Ä–µ—á–µ–Ω—å –Ω–∞—Å–µ–ª—ë–Ω–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤.\n\n"
        "–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –±—É–¥—É—Ç –ø—Ä–æ–≤–µ–¥–µ–Ω—ã –ø—É–±–ª–∏—á–Ω—ã–µ "
        "–æ–±—Å—É–∂–¥–µ–Ω–∏—è –∏ —Å—Ö–æ–¥ –∂–∏—Ç–µ–ª–µ–π.",

        "üìå **–ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç –∂–∏—Ç–µ–ª–µ–π?**\n"
        "‚úî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã (–ø–æ–¥–ø–∏—Å–∏, —É—á–∞—Å—Ç–∏–µ –≤ –æ–±—Å—É–∂–¥–µ–Ω–∏—è—Ö);\n"
        "‚úî –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∂–∏–≤–∞—é—â–∏—Ö;\n"
        "‚úî –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ–µ —É—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–±–æ—Ç–µ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω–æ–π –≥—Ä—É–ø–ø—ã.",


        "üìß **–ö–æ–Ω—Ç–∞–∫—Ç—ã –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω–æ–π –≥—Ä—É–ø–ø—ã**\n"
        "recreator2026@mail.ru\n\n"
        "**–î–µ—Ä–µ–≤–Ω—è –ó–∞—Ö–æ–∂—å–µ ‚Äî —ç—Ç–æ –Ω–∞—à–∏ –¥–æ–º–∞, –Ω–∞—à–∞ –∏—Å—Ç–æ—Ä–∏—è –∏ –Ω–∞—à–µ –±—É–¥—É—â–µ–µ.\n"
        "–ï—ë –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞—Å—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫–∞–∂–¥–æ–º—É –∂–∏—Ç–µ–ª—é.**"
    ]
    for p in parts:
        await message.answer(p)
    await message.answer(
    "üîù **–ö–æ–Ω–µ—Ü —Ä–∞–∑–¥–µ–ª–∞**\n\n"
    "–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ —á–∞—Ç –≤–≤–µ—Ä—Ö, —á—Ç–æ–±—ã —á–∏—Ç–∞—Ç—å —Å –Ω–∞—á–∞–ª–∞."
    )


# ===== –ö–ê–†–¢–´ =====
@dp.message(F.text == "üó∫ –ö–∞—Ä—Ç—ã")
async def maps_menu(message: types.Message):
    await message.answer(
        "üó∫ <b>–ö–∞—Ä—Ç—ã –¥–µ—Ä–µ–≤–Ω–∏ –ó–∞—Ö–æ–∂—å–µ</b>\n\n–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥:",
        reply_markup=maps_keyboard
    )
@dp.message(F.text.in_(MAPS.keys()))
async def maps_handler(message: types.Message):
    data = MAPS[message.text]
    await message.answer_photo(
        FSInputFile(data["file"]),
        caption=data["caption"]
    )
@dp.message(F.text == "‚¨Ö –ù–∞–∑–∞–¥")
async def back_to_main(message: types.Message):
    await message.answer(
        "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é",
        reply_markup=keyboard
    )

# ===== –ò–°–¢–û–†–ò–Ø =====
@dp.message(F.text == "üìú –ò—Å—Ç–æ—Ä–∏—è –¥–µ—Ä–µ–≤–Ω–∏ –ó–∞—Ö–æ–∂—å–µ")
async def history_cmd(message: types.Message):
    
    parts = [
        "üìú **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –æ—á–µ—Ä–∫ –æ –¥–µ—Ä–µ–≤–Ω–µ –ú. –ó–∞—Ö–æ–Ω—å–µ (–ó–∞—Ö–æ–∂—å–µ)**\n\n"
        "**–í–≤–µ–¥–µ–Ω–∏–µ**\n\n"
        "–î–µ—Ä–µ–≤–Ω—è –ú. –ó–∞—Ö–æ–Ω—å–µ, –ø–æ–∑–¥–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–∞–∫ –ó–∞—Ö–æ–∂—å–µ, "
        "—è–≤–ª—è–ª–∞—Å—å –æ–¥–Ω–∏–º –∏–∑ —Å—Ç–∞—Ä–∏–Ω–Ω—ã—Ö —Å–µ–ª—å—Å–∫–∏—Ö –ø–æ—Å–µ–ª–µ–Ω–∏–π –ò–Ω–≥–µ—Ä–º–∞–Ω–ª–∞–Ω–¥–∏–∏, "
        "—Ä–∞—Å–ø–æ–ª–∞–≥–∞–≤—à–∏–º—Å—è –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏, "
        "–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω—ã–Ω–µ—à–Ω–µ–≥–æ –¢–æ—Å–Ω–µ–Ω—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞.",

        "–ù–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –±–æ–ª–µ–µ —á–µ–º –ø—è—Ç–∏ —Å—Ç–æ–ª–µ—Ç–∏–π –ó–∞—Ö–æ–∂—å–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ "
        "–∫–∞–∫ –∫—Ä–µ—Å—Ç—å—è–Ω—Å–∫–∞—è –¥–µ—Ä–µ–≤–Ω—è, –º–µ–Ω—è—è —Å–≤–æ—ë –Ω–∞–∑–≤–∞–Ω–∏–µ, "
        "–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—É—é –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –∏ —Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω—É—é —Ä–æ–ª—å, "
        "–ø—Ä–µ–∂–¥–µ —á–µ–º –∏—Å—á–µ–∑–Ω—É—Ç—å —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–∞—Ä—Ç –≤ –∫–æ–Ω—Ü–µ XX –≤–µ–∫–∞.",

        "–ò—Å—Ç–æ—Ä–∏—è –ó–∞—Ö–æ–Ω—å—è —Ç–µ—Å–Ω–æ —Å–≤—è–∑–∞–Ω–∞ —Å –æ—Å–≤–æ–µ–Ω–∏–µ–º –∑–µ–º–µ–ª—å "
        "–≤–¥–æ–ª—å —Ä–µ–∫ –ù–µ–≤—ã –∏ –¢–æ—Å–Ω—ã, —Ä–∞–∑–≤–∏—Ç–∏–µ–º –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥—Å–∫–æ–π –≥—É–±–µ—Ä–Ω–∏–∏ "
        "–∏ —Å—É–¥—å–±–∞–º–∏ –∫—Ä–µ—Å—Ç—å—è–Ω—Å–∫–∏—Ö –ø–æ—Å–µ–ª–µ–Ω–∏–π –°–µ–≤–µ—Ä–æ-–ó–∞–ø–∞–¥–∞ –†–æ—Å—Å–∏–∏.",

        "üìå **–†–∞–Ω–Ω–∏–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è (XV‚ÄìXVI –≤–µ–∫–∞)**\n\n"
        "–°–∞–º–æ–µ —Ä–∞–Ω–Ω–µ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø–æ—Å–µ–ª–µ–Ω–∏—è –æ—Ç–Ω–æ—Å–∏—Ç—Å—è "
        "–∫ 1500 –≥–æ–¥—É. –í ¬´–ü–µ—Ä–µ–ø–∏—Å–Ω–æ–π –æ–∫–ª–∞–¥–Ω–æ–π –∫–Ω–∏–≥–µ –í–æ–¥—Å–∫–æ–π –ø—è—Ç–∏–Ω—ã¬ª "
        "–∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –¥–≤–µ —Å–º–µ–∂–Ω—ã–µ –¥–µ—Ä–µ–≤–Ω–∏ ‚Äî ¬´–ó–∞—Ö–æ–∂–∞–∏¬ª –∏ ¬´–∑–∞ –•–æ–∂–∞–∏¬ª, "
        "–≤—Ö–æ–¥–∏–≤—à–∏–µ –≤ —Å–æ—Å—Ç–∞–≤ –°–ø–∞—Å—Å–∫–æ–≥–æ –ì–æ—Ä–æ–¥–µ–Ω—Å–∫–æ–≥–æ –ø–æ–≥–æ—Å—Ç–∞ "
        "–û—Ä–µ—Ö–æ–≤—Å–∫–æ–≥–æ —É–µ–∑–¥–∞.",

        "–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Å–µ–ª–µ–Ω–∏—è, –ø–æ –≤—Å–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏, —Å–≤—è–∑–∞–Ω–æ "
        "—Å —Ç–æ–ø–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏ –º–µ—Å—Ç–Ω–æ—Å—Ç–∏ ‚Äî "
        "—Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ–º ¬´–∑–∞ —Ö–æ–¥–æ–º¬ª –∏–ª–∏ ¬´–∑–∞ –∏–∑–≥–∏–±–æ–º¬ª –ø—É—Ç–∏, "
        "—á—Ç–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω–æ –¥–ª—è –¥—Ä–µ–≤–Ω–∏—Ö —Å–ª–∞–≤—è–Ω–æ-—Ñ–∏–Ω—Å–∫–∏—Ö —Ç–æ–ø–æ–Ω–∏–º–æ–≤ "
        "–ò–Ω–≥–µ—Ä–º–∞–Ω–ª–∞–Ω–¥–∏–∏.",

        "üìå **XVII –≤–µ–∫ –∏ —à–≤–µ–¥—Å–∫–∏–π –ø–µ—Ä–∏–æ–¥**\n\n"
        "–ü–æ—Å–ª–µ –°—Ç–æ–ª–±–æ–≤—Å–∫–æ–≥–æ –º–∏—Ä–∞ 1617 –≥–æ–¥–∞ –∑–µ–º–ª–∏ –ø–æ –Ω–∏–∂–Ω–µ–º—É —Ç–µ—á–µ–Ω–∏—é "
        "–ù–µ–≤—ã –∏ –¢–æ—Å–Ω—ã –æ–∫–∞–∑–∞–ª–∏—Å—å –ø–æ–¥ –≤–ª–∞—Å—Ç—å—é –®–≤–µ—Ü–∏–∏. "
        "–í —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥ –º–Ω–æ–≥–∏–µ –¥–µ—Ä–µ–≤–Ω–∏ —Ä–µ–≥–∏–æ–Ω–∞ –ø–µ—Ä–µ–∂–∏–≤–∞–ª–∏ —É–ø–∞–¥–æ–∫.",

        "–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–µ–±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –∏ –æ—Ç—Ç–æ–∫ –Ω–∞—Å–µ–ª–µ–Ω–∏—è, "
        "–ó–∞—Ö–æ–Ω—å–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å, —á—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è –µ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏–µ–º "
        "–Ω–∞ —Ä—É—Å—Å–∫–∏—Ö –∫–∞—Ä—Ç–∞—Ö XVIII –≤–µ–∫–∞.",

        "üìå **–í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –≤ —Å–æ—Å—Ç–∞–≤ –†–æ—Å—Å–∏–∏ –∏ XVIII –≤–µ–∫**\n\n"
        "–í —Ö–æ–¥–µ –°–µ–≤–µ—Ä–Ω–æ–π –≤–æ–π–Ω—ã (1700‚Äì1721) –ü—ë—Ç—Ä I –≤–µ—Ä–Ω—É–ª –ò–Ω–≥–µ—Ä–º–∞–Ω–ª–∞–Ω–¥–∏—é "
        "–≤ —Å–æ—Å—Ç–∞–≤ –†–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–∞. "
        "–û—Å–Ω–æ–≤–∞–Ω–∏–µ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–∞ —Å–¥–µ–ª–∞–ª–æ —Ä–µ–≥–∏–æ–Ω —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–º.",

        "–ù–∞ –∫–∞—Ä—Ç–µ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥—Å–∫–æ–π –≥—É–±–µ—Ä–Ω–∏–∏ 1792 –≥–æ–¥–∞ "
        "–¥–µ—Ä–µ–≤–Ω—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∞ –∫–∞–∫ ¬´–ú. –ó–∞—Ö–æ–Ω—å–µ¬ª, "
        "–≥–¥–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ ¬´–ú.¬ª –æ–∑–Ω–∞—á–∞–µ—Ç ¬´–ú–∞–ª–æ–µ¬ª.",

        "üìå **XIX –≤–µ–∫: —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ó–∞—Ö–æ–∂—å—è**\n\n"
        "–í XIX –≤–µ–∫–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è:\n"
        "‚Ä¢ 1810 ‚Äî ¬´–ó–∞—Ö–æ–Ω—å—è¬ª;\n"
        "‚Ä¢ 1816 ‚Äî ¬´–ó–∞—Ö–æ–Ω—å–µ¬ª;\n"
        "‚Ä¢ 1834 ‚Äî ¬´–ó–∞—Ö–æ–∂—å–µ¬ª.\n\n"
        "–ò–º–µ–Ω–Ω–æ —Ñ–æ—Ä–º–∞ ¬´–ó–∞—Ö–æ–∂—å–µ¬ª —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —É—Å—Ç–æ–π—á–∏–≤–æ–π.",

        "–ö —ç—Ç–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ –¥–µ—Ä–µ–≤–Ω—è –∏–º–µ–ª–∞ –ª–∏–Ω–µ–π–Ω—É—é –ø–ª–∞–Ω–∏—Ä–æ–≤–∫—É, "
        "—Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—É—é –¥–ª—è —Å–µ–ª—å—Å–∫–∏—Ö –ø–æ—Å–µ–ª–µ–Ω–∏–π –®–ª–∏—Å—Å–µ–ª—å–±—É—Ä–≥—Å–∫–æ–≥–æ —É–µ–∑–¥–∞.",

        "üìå **XX –≤–µ–∫ –∏ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–Ω–∏**\n\n"
        "–í XX –≤–µ–∫–µ –ó–∞—Ö–æ–∂—å–µ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É—Ç—Ä–∞—á–∏–≤–∞–ª–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –Ω–∞—Å–µ–ª–µ–Ω–∏–µ. "
        "–í–æ –≤—Ä–µ–º—è –í–µ–ª–∏–∫–æ–π –û—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–æ–π–Ω—ã —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è –Ω–∞—Ö–æ–¥–∏–ª–∞—Å—å "
        "–≤ –∑–æ–Ω–µ –æ–∫–∫—É–ø–∞—Ü–∏–∏.",

        "–ü–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ "
        "–æ—Ç 22 –∞–ø—Ä–µ–ª—è 1996 –≥–æ–¥–∞ ‚Ññ 167 –¥–µ—Ä–µ–≤–Ω—è –ó–∞—Ö–æ–∂—å–µ "
        "–±—ã–ª–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ —É–ø—Ä–∞–∑–¥–Ω–µ–Ω–∞ –≤ —Å–≤—è–∑–∏ —Å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º "
        "–ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–æ–∂–∏–≤–∞—é—â–µ–≥–æ –Ω–∞—Å–µ–ª–µ–Ω–∏—è.",

        "üìå **–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ**\n\n"
        "–ù–∞ –º–µ—Å—Ç–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–π –¥–µ—Ä–µ–≤–Ω–∏ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª—Å—è "
        "—Å–∞–¥–æ–≤–æ–¥—á–µ—Å–∫–∏–π –º–∞—Å—Å–∏–≤ –°–ù–¢ ¬´–ó–∞—Ö–æ–∂—å–µ¬ª, "
        "—É–Ω–∞—Å–ª–µ–¥–æ–≤–∞–≤—à–∏–π –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ.",

        "üìç **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**\n\n"
        "–ò—Å—Ç–æ—Ä–∏—è –ó–∞—Ö–æ–∂—å—è ‚Äî —ç—Ç–æ –±–æ–ª–µ–µ 500 –ª–µ—Ç –∂–∏–∑–Ω–∏ –ø–æ—Å–µ–ª–µ–Ω–∏—è, "
        "–æ—Ç—Ä–∞–∂–∞—é—â–∏–µ —Å—É–¥—å–±—É —Å–µ–ª—å—Å–∫–∏—Ö —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π –°–µ–≤–µ—Ä–æ-–ó–∞–ø–∞–¥–∞ –†–æ—Å—Å–∏–∏.\n\n"
        "–°–µ–≥–æ–¥–Ω—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–Ω–∏ –æ–∑–Ω–∞—á–∞–µ—Ç "
        "–≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–π —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏ –∏ "
        "–≤–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏."
    ]
    for p in parts:
        await message.answer(p)
    await message.answer(
    "üîù **–ö–æ–Ω–µ—Ü —Ä–∞–∑–¥–µ–ª–∞**\n\n"
    "–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ —á–∞—Ç –≤–≤–µ—Ä—Ö, —á—Ç–æ–±—ã —á–∏—Ç–∞—Ç—å —Å –Ω–∞—á–∞–ª–∞."
    )


# ===== –î–û–†–û–ñ–ù–ê–Ø –ö–ê–†–¢–ê =====
@dp.message(F.text == "üó∫ –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞")
async def roadmap_cmd(message: types.Message):
   
    parts = [
        "üó∫ **–î–û–†–û–ñ–ù–ê–Ø –ö–ê–†–¢–ê –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–µ—Ä–µ–≤–Ω–∏ –ó–∞—Ö–æ–∂—å–µ**\n"
        "_–¢–æ—Å–Ω–µ–Ω—Å–∫–∏–π —Ä–∞–π–æ–Ω –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏_",

        "üìç **–≠–¢–ê–ü 1. –ó–∞–ø—É—Å–∫ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã –∏ –ª–µ–≥–∏—Ç–∏–º–∞—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ –°–ù–¢**\n"
        "‚è± 4‚Äì6 –Ω–µ–¥–µ–ª—å\n\n"
        "**–¶–µ–ª—å:** –ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –µ—Å—Ç—å –Ω–∞—Å–µ–ª–µ–Ω–∏–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞.\n\n"
        "**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**\n"
        "‚Ä¢ —Ñ–æ—Ä–º–∏—Ä—É–µ–º –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω—É—é –≥—Ä—É–ø–ø—É (3‚Äì7 —á–µ–ª–æ–≤–µ–∫);\n"
        "‚Ä¢ —Å–æ–∑–¥–∞—ë–º –∫–∞–Ω–∞–ª—ã —Å–≤—è–∑–∏ (—á–∞—Ç, –ø–æ—á—Ç–∞);\n"
        "‚Ä¢ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å—Ä–µ–¥–∏ –∂–∏—Ç–µ–ª–µ–π;\n"
        "‚Ä¢ —Å–æ–±–∏—Ä–∞–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É, –¥–∞–Ω–Ω—ã–µ –æ –ø—Ä–æ–∂–∏–≤–∞—é—â–∏—Ö –∏ –∑–∞—Å—Ç—Ä–æ–π–∫–µ.\n\n"
        "**–†–µ–∑—É–ª—å—Ç–∞—Ç:**\n"
        "‚úî –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω–∞—è –≥—Ä—É–ø–ø–∞;\n"
        "‚úî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∂–∏—Ç–µ–ª–µ–π;\n"
        "‚úî –ø–µ—Ä–≤–∏—á–Ω—ã–µ —Ü–∏—Ñ—Ä—ã –ø–æ –Ω–∞—Å–µ–ª–µ–Ω–∏—é.",

        "üìç **–≠–¢–ê–ü 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**\n"
        "‚è± 1‚Äì2 –º–µ—Å—è—Ü–∞\n\n"
        "**–¶–µ–ª—å:** —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏.\n\n"
        "**–ì–æ—Ç–æ–≤–∏–º:**\n"
        "‚Ä¢ –∫–æ–Ω—Ü–µ–ø—Ü–∏—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–µ—Ä–µ–≤–Ω–∏;\n"
        "‚Ä¢ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è;\n"
        "‚Ä¢ –¥–∞–Ω–Ω—ã–µ –æ –Ω–∞—Å–µ–ª–µ–Ω–∏–∏ –∏ –∑–∞—Å—Ç—Ä–æ–π–∫–µ;\n"
        "‚Ä¢ –∫–∞—Ä—Ç—ã –∏ —Å—Ö–µ–º—ã —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏;\n"
        "‚Ä¢ –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∂–∏—Ç–µ–ª–µ–π.\n\n"
        "**–†–µ–∑—É–ª—å—Ç–∞—Ç:**\n"
        "‚úî –≥–æ—Ç–æ–≤—ã–π –ø–∞–∫–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.",

        "üìç **–≠–¢–ê–ü 3. –†–∞–±–æ—Ç–∞ —Å –º–µ—Å—Ç–Ω–æ–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π**\n"
        "‚è± 1‚Äì4 –º–µ—Å—è—Ü–∞\n\n"
        "**–ö—É–¥–∞ –æ–±—Ä–∞—â–∞–µ–º—Å—è:**\n"
        "‚Ä¢ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –ù–∏–∫–æ–ª—å—Å–∫–æ–≥–æ –ø–æ—Å–µ–ª–µ–Ω–∏—è;\n"
        "‚Ä¢ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –¢–æ—Å–Ω–µ–Ω—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞.\n\n"
        "**–ö–ª—é—á–µ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ:**\n"
        "üìå –ø—É–±–ª–∏—á–Ω—ã–µ —Å–ª—É—à–∞–Ω–∏—è –∏–ª–∏ —Å—Ö–æ–¥ –∂–∏—Ç–µ–ª–µ–π (–§–ó-131).\n\n"
        "**–†–µ–∑—É–ª—å—Ç–∞—Ç:**\n"
        "‚úî —Ä–µ—à–µ–Ω–∏–µ –°–æ–≤–µ—Ç–∞ –¥–µ–ø—É—Ç–∞—Ç–æ–≤;\n"
        "‚úî –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–∞.",

        "üìç **–≠–¢–ê–ü 4. –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å (–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å)**\n"
        "‚è± 6‚Äì12 –º–µ—Å—è—Ü–µ–≤\n\n"
        "**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**\n"
        "‚Ä¢ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–º–∏ –∫–æ–º–∏—Ç–µ—Ç–∞–º–∏;\n"
        "‚Ä¢ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–∞–∫–æ–Ω–æ–ø—Ä–æ–µ–∫—Ç–∞;\n"
        "‚Ä¢ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –ó–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å–Ω—ã–º —Å–æ–±—Ä–∞–Ω–∏–µ–º –õ–û;\n"
        "‚Ä¢ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ –∑–∞–∫–æ–Ω–∞ –≥—É–±–µ—Ä–Ω–∞—Ç–æ—Ä–æ–º.\n\n"
        "**–†–µ–∑—É–ª—å—Ç–∞—Ç:**\n"
        "‚úî –¥–µ—Ä–µ–≤–Ω—è –ó–∞—Ö–æ–∂—å–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.",

        "üìç **–≠–¢–ê–ü 5. –†–µ–µ—Å—Ç—Ä—ã –∏ –∞–¥—Ä–µ—Å–∞**\n"
        "‚è± 1‚Äì3 –º–µ—Å—è—Ü–∞\n\n"
        "**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è:**\n"
        "‚Ä¢ –≤–Ω–µ—Å–µ–Ω–∏–µ –≤ –§–ò–ê–°, –†–æ—Å—Ä–µ–µ—Å—Ç—Ä, –û–ö–¢–ú–û, –û–ö–ê–¢–û;\n"
        "‚Ä¢ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ –∏ –Ω—É–º–µ—Ä–∞—Ü–∏–∏ —É–ª–∏—Ü.\n\n"
        "**–†–µ–∑—É–ª—å—Ç–∞—Ç:**\n"
        "‚úî –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –∞–¥—Ä–µ—Å–∞;\n"
        "‚úî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–ø–∏—Å–∫–∏.",

        "üìç **–≠–¢–ê–ü 6. –†–∞–∑–≤–∏—Ç–∏–µ –∏ –±–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ**\n"
        "‚è± –ø–æ—Å—Ç–æ—è–Ω–Ω–æ\n\n"
        "**–ß—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω—ã–º:**\n"
        "‚Ä¢ –¥–æ—Ä–æ–≥–∏ –∏ –æ—Å–≤–µ—â–µ–Ω–∏–µ;\n"
        "‚Ä¢ —É—á–∞—Å—Ç–∏–µ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö –±–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞;\n"
        "‚Ä¢ —Ä–æ—Å—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏;\n"
        "‚Ä¢ —É—Å—Ç–æ–π—á–∏–≤–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏.",

        "üèÅ **–ò–¢–û–ì**\n\n"
        "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–Ω–∏ –ó–∞—Ö–æ–∂—å–µ ‚Äî —ç—Ç–æ –ø–æ—ç—Ç–∞–ø–Ω—ã–π, "
        "—é—Ä–∏–¥–∏—á–µ—Å–∫–∏ –≤—ã–≤–µ—Ä–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, "
        "–∫–æ—Ç–æ—Ä—ã–π –¥–∞—ë—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∂–∏—Ç–µ–ª—è–º."
    ]
    for p in parts:
        await message.answer(p)

    await message.answer(
    "üîù **–ö–æ–Ω–µ—Ü —Ä–∞–∑–¥–µ–ª–∞**\n\n"
    "–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ —á–∞—Ç –≤–≤–µ—Ä—Ö, —á—Ç–æ–±—ã —á–∏—Ç–∞—Ç—å —Å –Ω–∞—á–∞–ª–∞."
    )

# ===== –ü–†–û–ß–ï–ï =====
@dp.message(F.text.contains("–ü—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ –≤ –æ–ø—Ä–æ—Å–µ"))
async def vote_cmd(message: types.Message):
    uid = message.from_user.id

    # –ª–æ–≥–∏—Ä—É–µ–º –∫–∞–∂–¥—ã–π –∫–ª–∏–∫
    await register_vote(uid)

    await message.answer(
        "üó≥ –£—á–∞—Å—Ç–∏–µ –≤ –æ–ø—Ä–æ—Å–µ\n\n"
        "–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–Ω—Ç–µ—Ä–µ—Å –∫ –ø—Ä–æ–µ–∫—Ç—É!\n\n"
        "üëâ –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø—Ä–æ—Å—É:"
    )
    await message.answer(GOOGLE_FORM_URL)

@dp.message(F.text == "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")
async def stats_cmd(message: types.Message):
    total = await get_votes_count()
    unique = await get_unique_users_count()

    await message.answer(
        f"üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–ø—Ä–æ—Å–∞\n\n"
        f"üîò –ü–µ—Ä–µ—Ö–æ–¥–æ–≤: {total}\n"
        f"üë• –£—á–∞—Å—Ç–Ω–∏–∫–æ–≤: {unique}"
    )

@dp.message(F.text == "üí¨ –ß–∞—Ç –∂–∏—Ç–µ–ª–µ–π")
async def chat_cmd(message: types.Message):
    await message.answer(f"üëâ {CHAT_URL}")

@dp.message(F.text == "ü§ù –ö–∞–∫ –ø–æ–º–æ—á—å")
async def help_cmd(message: types.Message):
    qr_image = await generate_qr()

    await message.answer_photo(
    photo=qr_image,
    caption=(
        "ü§ù –ö–∞–∫ –ø–æ–º–æ—á—å –ø—Ä–æ–µ–∫—Ç—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–µ—Ä–µ–≤–Ω–∏ –ó–∞—Ö–æ–∂—å–µ\n\n"
        "1Ô∏è‚É£ –ü—Ä–æ–π—Ç–∏ –æ–ø—Ä–æ—Å\n"
        "2Ô∏è‚É£ –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —ç—Ç–∏–º –±–æ—Ç–æ–º —Å —Å–æ—Å–µ–¥—è–º–∏\n"
        "3Ô∏è‚É£ –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ –∏–ª–∏ –ø–µ—Ä–µ—à–ª–∏—Ç–µ —Å—Å—ã–ª–∫—É\n"
        "4Ô∏è‚É£ –ü—Ä–∏–º–∏—Ç–µ —É—á–∞—Å—Ç–∏–µ –≤ –æ–±—Å—É–∂–¥–µ–Ω–∏–∏\n\n"
        "–°—Å—ã–ª–∫–∞ –Ω–∞ –±–æ—Ç–∞:\n"
        "https://t.me/Recreator_info_bot"
    ),
    parse_mode=None
)
@dp.message()
async def debug_all(message: types.Message):
    print("–ü–†–ò–®–õ–û –°–û–û–ë–©–ï–ù–ò–ï:", message.text)

# ===== –ó–ê–ü–£–°–ö =====
async def main():
    bot = Bot(
        API_TOKEN,
        default=DefaultBotProperties(parse_mode="HTML"),
        timeout=30
    )

    # üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û
    await bot.delete_webhook(drop_pending_updates=True)

    await init_db()
    await debug_bot(bot)
    await dp.start_polling(bot)

if __name__ == "__main__":
    asyncio.run(main())
